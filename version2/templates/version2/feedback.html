<!DOCTYPE html>
<html>
<head>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Kalam&display=swap');

        .feedback {
            padding-top: 250px;
            text-align: center;
            font-family: 'Kalam', cursive;
        }

        #icon {
            height: 100px;
            length: 100px;
        }

        #badge {
            height: 300px;
            length: 300px;
        }

        .five_badges {
            height: 130px;
            length: 130px;
        }

        .icon-credit {
            bottom: 0;
            right: 0;
            position: absolute;
            font-family: 'Kalam', cursive;
        }

        #text, #next_badge {
            font-size: 60px;
        }

        #score {
            font-size: 40px;
        }

        @media (min-width: 1000px) {
            .feedback {
                padding-top: 110px;
            }

            #icon {
                height: 50px;
                length: 50px;
            }

            #badge {
                height: 150px;
                length: 150px;
            }

            .five_badges {
                height: 50px;
                length: 50px;
            }

            #text, #next_badge {
                font-size: 30px;
            }

            #score {
                font-size: 20px;
            }
        }

    </style>

</head>
<body>

<div class="feedback">
    <img id="badge">
    <p></p>
    <img id="icon">
    <h1 id="text">{{ feedback }}</h1>
    <h1 id="score"></h1>
    <img class="five_badges" id="b1">
    <img class="five_badges" id="b2">
    <img class="five_badges" id="b3">
    <img class="five_badges" id="b4">
    <img class="five_badges" id="b5">
    <h1 id="next_badge"></h1>
</div>


<div class="icon-credit">
    Icons made by <a href="https://www.flaticon.com/authors/pixelmeetup" title="Pixelmeetup">Pixelmeetup</a> and <a
        href="https://www.flaticon.com/authors/xnimrodx" title="xnimrodx">xnimrodx</a> from <a
        href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>
</div>
</body>
<form action="../../../../home{{ q_id }}/{{ respondent_id }}/" id="main_form" method="get">
</form>
<script>

    {% load staticfiles %}

    {#function Quartile(data, q) {#}
    {#    data = Array_Sort_Numbers(data);#}
    {#    var pos = ((data.length) - 1) * q;#}
    {#    var base = Math.floor(pos);#}
    {#    var rest = pos - base;#}
    {#    if ((data[base + 1] !== undefined)) {#}
    {#        return data[base] + rest * (data[base + 1] - data[base]);#}
    {#    } else {#}
    {#        return data[base];#}
    {#    }#}
    {#}#}
    {##}
    {#function Array_Sort_Numbers(inputarray) {#}
    {#    return inputarray.sort(function (a, b) {#}
    {#        return a - b;#}
    {#    });#}
    {#}#}
    {##}
    {#var allscore = [];#}
    {#{% for datum in score_dict %}#}
        {#var s = {{ datum.0 }}#}
        {#    var freq = {{ datum.1 }}#}
    {#    for (let i = 0; i < {{ datum.1 }}; i++) {#}
    {#        allscore.push({{ datum.0 }})#}
    {#    }#}
    {#{% endfor %}#}
    {##}
    {#var per20 = Quartile(allscore, 0.2);#}
    {#var per40 = Quartile(allscore, 0.4);#}
    {#var per60 = Quartile(allscore, 0.6);#}
    {#var per80 = Quartile(allscore, 0.8);#}


    function Check_Quartile(score) {
        if (score > 160) {
            document.getElementById("badge").src = "{% static 'myapp/eaglebadge.png' %}"
            document.getElementById("next_badge").innerHTML = "You've earned the gold eagle badge! Keep it going!"
            document.getElementById("b1").src = "{% static 'myapp/molebadge.png' %}"
            document.getElementById("b2").src = "{% static 'myapp/batbadge.png' %}"
            document.getElementById("b3").src = "{% static 'myapp/goatbadge.png' %}"
            document.getElementById("b4").src = "{% static 'myapp/owlbadge.png' %}"
            document.getElementById("b5").src = "{% static 'myapp/eaglebadge.png' %}"
        } else if (score > 120) {
            document.getElementById("badge").src = "{% static 'myapp/owlbadge.png' %}"
            var score_diff = (160 - score).toString()
            var text = "You are " +  score_diff + " points away from the next badge."
            document.getElementById("next_badge").innerText = text
            document.getElementById("b1").src = "{% static 'myapp/molebadge.png' %}"
            document.getElementById("b2").src = "{% static 'myapp/batbadge.png' %}"
            document.getElementById("b3").src = "{% static 'myapp/goatbadge.png' %}"
            document.getElementById("b4").src = "{% static 'myapp/owlbadge.png' %}"
            document.getElementById("b5").src = "{% static 'myapp/bw/eaglebadge_bw.png' %}"
        } else if (score > 80) {
            document.getElementById("badge").src = "{% static 'myapp/goatbadge.png' %}"
            var score_diff = (120 - score).toString()
            var text = "You are " +  score_diff + " points away from the next badge."
            document.getElementById("next_badge").innerText = text
            document.getElementById("b1").src = "{% static 'myapp/molebadge.png' %}"
            document.getElementById("b2").src = "{% static 'myapp/batbadge.png' %}"
            document.getElementById("b3").src = "{% static 'myapp/goatbadge.png' %}"
            document.getElementById("b4").src = "{% static 'myapp/bw/owlbadge_bw.png' %}"
            document.getElementById("b5").src = "{% static 'myapp/bw/eaglebadge_bw.png' %}"
        } else if (score > 40) {
            document.getElementById("badge").src = "{% static 'myapp/batbadge.png' %}"
            var score_diff = (80 - score).toString()
            var text = "You are " +  score_diff + " points away from the next badge."
            document.getElementById("next_badge").innerText = text
            document.getElementById("b1").src = "{% static 'myapp/molebadge.png' %}"
            document.getElementById("b2").src = "{% static 'myapp/batbadge.png' %}"
            document.getElementById("b3").src = "{% static 'myapp/bw/goatbadge_bw.png' %}"
            document.getElementById("b4").src = "{% static 'myapp/bw/owlbadge_bw.png' %}"
            document.getElementById("b5").src = "{% static 'myapp/bw/eaglebadge_bw.png' %}"
        } else {
            document.getElementById("badge").src = "{% static 'myapp/molebadge.png' %}"
            var score_diff = (40 - score).toString()
            var text = "You are " +  score_diff + " points away from the next badge."
            document.getElementById("next_badge").innerText = text
            document.getElementById("b1").src = "{% static 'myapp/molebadge.png' %}"
            document.getElementById("b2").src = "{% static 'myapp/bw/batbadge_bw.png' %}"
            document.getElementById("b3").src = "{% static 'myapp/bw/goatbadge_bw.png' %}"
            document.getElementById("b4").src = "{% static 'myapp/bw/owlbadge_bw.png' %}"
            document.getElementById("b5").src = "{% static 'myapp/bw/eaglebadge_bw.png' %}"
        }
    }

    Check_Quartile({{ current_score }})


    function s() {
        document.getElementById("main_form").submit();
    }


    let feedback = document.getElementById("text").innerText
    console.log(feedback)
    if (feedback === "CORRECT") {
        document.getElementById("icon").src = "{% static 'myapp/correct.svg' %}"
        document.getElementById("text").innerHTML = "<span style=\"color: green; \">CORRECT +10</span>"
        document.getElementById("score").innerText = "CURRENT SCORE: " +
        {{ current_score }}
    } else if (feedback === "INCORRECT") {
        document.getElementById("icon").src = "{% static 'myapp/wrong.svg' %}"
        document.getElementById("text").innerHTML = "<span style=\"color: red; \">INCORRECT -5</span>"
        document.getElementById("score").innerText = "CURRENT SCORE: " +
        {{ current_score }}
    } else {
        document.getElementById("icon").src = "{% static 'myapp/right-arrow.svg' %}"
        document.getElementById("text").innerHTML = "<span style=\"color: orange; \">SKIPPED +0</span>"
        document.getElementById("score").innerText = "CURRENT SCORE: " +
        {{ current_score }}
    }

    setTimeout(s, 3000)

</script>
</html>