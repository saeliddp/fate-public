<!DOCTYPE html>
<html>
<head>
  <style>
      @import url('https://fonts.googleapis.com/css?family=Kalam&display=swap');
    {% load staticfiles %}
      body {
        background-image: url("{% static 'myapp/snow-top-mountain-under-clear-sky-1054218.jpg' %}");
          background-size: 100% 150%;
        }

    .header {
      padding-top: 8px;
      margin: 0px;
      text-align: center;
      color: white;
      font-family: "verdana";
    }

    .share {
        color: white;
        font-family: "verdana";
      }

    .board-title {
        text-align: center;
        font-family: "verdana";
        padding-top: 50px;
    }

    .mturk-id {
      display: table;
      margin: auto;
      margin-top: 50px;
	  text-align: center;
    }

    .mturk-id input {
      margin-top: 5px;
    }

    #phrase {
      display: none;
    }

    #container {
      width: 400px;
      height: auto;
        margin-left: auto;
        margin-right: auto;
        margin-top: 20px;
        border-style: solid;
        border-width: 2px;
        border-color: navajowhite;
        border-radius: 8px;
    }

    .row {
      position: relative;
      display: block;
      width: 100%;
      height: 50px;
      border-bottom: 1px solid #AFAFAF;
    }

    .score {
        font-size: 20px;
        padding-top: 5px;
      position: relative;
      display: inline-block;
      width: 100%;
      line-height: 45px;
        text-align: center;
        font-family: 'Kalam', cursive;
    }

    .row:nth-child(1) {
      background: rgba(255, 255, 255, 0.4);
    }

    .row:nth-child(2) {
      background: gold;
    }

    .row:nth-child(3) {
      background: #c0c0c0;
    }

    .row:nth-child(4) {
      background: #cd7f32;
    }

      .row:nth-child(5) {
      background: rgba(255, 255, 255, 0.4);
    }

      .row:nth-child(6) {
        background: rgba(255, 255, 255, 0.4);
    }

      .share-block {
          position: absolute;
          right: 20px;
      }

      ul.share-buttons{
          list-style: none;
          padding: 0;
        }

        ul.share-buttons li{
          display: inline;
        }

        ul.share-buttons .sr-only{
          position: absolute;
          clip: rect(1px 1px 1px 1px);
          clip: rect(1px, 1px, 1px, 1px);
          padding: 0;
          border: 0;
          height: 1px;
          width: 1px;
          overflow: hidden;
        }

      .chart {
          width: 300px;
          margin-top: -300px;
          position: absolute;
      }
  </style>

  <title>Do you Google?</title>
</head>
<body style="background-color: #f2f2f2">
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v5.0"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js"></script>

  <h1 class="header header1">Thank you for playing!</h1>
  <h2 class="header">You scored {{ score }} points!</h2>
    <div class="share-block">
        <p class="share">Share with you friends!</p>
        <ul class="share-buttons">
          <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fshielded-tundra-32718.herokuapp.com%2F&quote=" title="Share on Facebook" target="_blank"><img alt="Share on Facebook" src="{% static 'myapp/Facebook.png' %}" /></a></li>
          <li><a href="https://twitter.com/intent/tweet?source=https%3A%2F%2Fshielded-tundra-32718.herokuapp.com%2F&text=:%20https%3A%2F%2Fshielded-tundra-32718.herokuapp.com%2F" target="_blank" title="Tweet"><img alt="Tweet" src="{% static 'myapp/Twitter.png' %}" /></a></li>
            <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fshielded-tundra-32718.herokuapp.com%2F&title=&summary=&source=https%3A%2F%2Fshielded-tundra-32718.herokuapp.com%2F" target="_blank" title="Share on LinkedIn"><img alt="Share on LinkedIn" src="{% static 'myapp/LinkedIn.png' %}" /></a></li>
        <li><a href="mailto:?subject=&body=:%20https%3A%2F%2Fshielded-tundra-32718.herokuapp.com%2F" target="_blank" title="Send email"><img alt="Send email" src="{% static 'myapp/Email.png' %}" /></a></li>
        </ul>
    </div>


  <h3 class="board-title">Leaderboard TOP 5!</h3>

  <div id="container">
      {% load staticfiles %}
        <div class="row">
            <div class="score">Score</div>
         </div>

      {% for datum in score_dict %}
          {% if forloop.counter < 6 %}
          <div class="row">
            <div class="score">{{datum.0}}</div>
         </div>
          {% endif %}
      {% endfor %}


  </div>


<div class="chart">
    <canvas id="myChart" width="200" height="200"></canvas>
</div>


<script>

    var newlist = []
    var current_score = []
    {% for datum in score_dict %}
        {% if datum.0 != score %}
        var xv = {{ datum.0 }}
        var yv = {{ datum.1 }}
        var point = {x: xv, y: yv}
        newlist.push(point)
        {% endif %}

        {% if datum.0 == score %}
        var xv2 = {{ datum.0 }}
        var yv2 = {{ datum.1 }}
        var point2 = {x: xv2, y: yv2}
        current_score.push(point2)
        {% endif %}
    {% endfor %}

    console.log(newlist)


var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'scatter',
    data: {
        datasets: [{
            label: 'Score Distribution',
            data: newlist,
            pointBackgroundColor: 'rgba(255, 206, 86, 1)',
            borderColor: 'rgba(255, 206, 86, 1)'
        },
        {
            label: 'Your Position',
            data: current_score,
            pointBackgroundColor: 'rgb(56,255,106)',
            borderColor: 'rgb(56,255,106)'
        }]
    },
    options: {
        legend: {
            labels: {
                fontColor: 'rgba(255, 255, 255)'
            }
        },

        scales: {
            xAxes: [{
                gridLines: {
                    color: 'rgba(255, 255, 255, 0.3)'
                },
                ticks: {
                    fontColor: "#fff"
                },
                scaleLabel: {
                    display: true,
                    labelString: 'score',
                    fontColor: "#fff"
                }
            }],
            yAxes: [{
                gridLines: {
                    color: 'rgba(255, 255, 255, 0.3)'
                },
                ticks: {
                    fontColor: "#fff"
                },
                scaleLabel: {
                    display: true,
                    labelString: 'frequency',
                    fontColor: "#fff"
                }
            }]
        }

    }
})

</script>

</body>